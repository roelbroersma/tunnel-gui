if [ "$EUID" -gt 0 ]
  then echo "Please run this script as Root, it will create a folder and install required Python libraries."
  exit
fi

pip install -r https://github.com/roelbroersma/tunnel-gui/raw/main/requirements.txt

wget https://github.com/roelbroersma/tunnel-gui/archive/main.zip -O "/tmp/tunnel-gui_main.zip"
unzip -o /tmp/tunnel-gui_main.zip -d /usr/bin/
rm /tmp/tunnel-gui_main.zip
cd /usr/bin/tunnel-gui-main

echo "Setting default password to: defaultpassword"
echo "Please change the default password immediately by changing the .env file and the web_password.txt file!"

echo 'defaultpassword' > web_password.txt;

echo;
echo "Generating .env file with random secret key..."
(
  (echo 'SECRET_KEY='; head -c 80 /dev/random | base64) | tr -d [:cntrl:];
  echo;
  echo 'DEBUG=False';
  echo 'SUPER_PASSWORD=defaultpassword';
  echo LOG_PATH=/var/log/tunnel-gui.log
) > .env

echo "Succesfully installed the Tunneling GUI. Check the next steps in README.org file"
echo;
