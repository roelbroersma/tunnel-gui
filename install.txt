if ! [ "$EUID" -eq 0 ]
  then echo "Please do not run this script as Root! Use it as the pi or dietpi user"
  exit
fi

pip install -r https://github.com/roelbroersma/tunnel-gui/raw/main/requirements.txt

wget https://github.com/roelbroersma/tunnel-gui/archive/main.zip -O "tunnel-gui_main.zip"
unzip ./tunnel-gui_main.zip
rm ./tunnel-gui_main.zip
cd ./tunnel-gui-main

echo "Enter a Super Password."
read -s -p "Super Password: " tunnelguipassword

echo;
echo "Generating .env file with random secret key..."
(
  (echo 'SECRET_KEY='; head -c 80 /dev/random | base64) | tr -d [:cntrl:];
  echo;
  echo 'DEBUG=False';
  echo 'SUPER_PASSWORD=$tunnelguipassword';
  echo LOG_PATH=/var/log/tunnel-gui.log
) > .env

echo "Succesfully installed the Tunneling GUI. Check the next steps in README.org file"
echo;
